(this.webpackJsonpxvoice=this.webpackJsonpxvoice||[]).push([[0],{254:function(e,t,a){e.exports=a(599)},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},262:function(e,t,a){},520:function(e,t){},599:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(251),r=a.n(s),o=(a(259),a(260),a(57)),i=a(42),c=a(43),m=a(45),d=a(44),u=a(46),g=a(32),h=(a(261),a(262),a(82),a(528)),p={uri:"1060@dialerprieto.xyz",ws_servers:"wss://dialerprieto.xyz:8089/ws",authorizationUser:"1060",password:"W3lcome77@@"},v=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={};return a.state={calls:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=new h.UA(p);e.invite("1061",{sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:!1}}}),this.setState({userAgent:e})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Qloq"),this.state.calls.map((function(e){return l.a.createElement("p",null,e)})))}}]),t}(n.Component);var E,f=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"calendar"},l.a.createElement("div",null,l.a.createElement("h2",null,"18, Sunday"),l.a.createElement("div",{className:"row center-xs"},l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("h3",null,"November")))),l.a.createElement("div",{className:"calendar__date"},l.a.createElement("div",{className:"calendar__day"},"S"),l.a.createElement("div",{className:"calendar__day"},"M"),l.a.createElement("div",{className:"calendar__day"},"T"),l.a.createElement("div",{className:"calendar__day"},"W"),l.a.createElement("div",{className:"calendar__day"},"T"),l.a.createElement("div",{className:"calendar__day"},"F"),l.a.createElement("div",{className:"calendar__day"},"S"),l.a.createElement("div",{className:"calendar__number"}),l.a.createElement("div",{className:"calendar__number"}),l.a.createElement("div",{className:"calendar__number"}),l.a.createElement("div",{className:"calendar__number"},"1"),l.a.createElement("div",{className:"calendar__number"},"2"),l.a.createElement("div",{className:"calendar__number"},"3"),l.a.createElement("div",{className:"calendar__number"},"4"),l.a.createElement("div",{className:"calendar__number"},"5"),l.a.createElement("div",{className:"calendar__number"},"6"),l.a.createElement("div",{className:"calendar__number"},"7"),l.a.createElement("div",{className:"calendar__number"},"8"),l.a.createElement("div",{className:"calendar__number"},"9"),l.a.createElement("div",{className:"calendar__number"},"10"),l.a.createElement("div",{className:"calendar__number"},"11"),l.a.createElement("div",{className:"calendar__number"},"12"),l.a.createElement("div",{className:"calendar__number"},"13"),l.a.createElement("div",{className:"calendar__number"},"14"),l.a.createElement("div",{className:"calendar__number"},"15"),l.a.createElement("div",{className:"calendar__number"},"16"),l.a.createElement("div",{className:"calendar__number"},"17"),l.a.createElement("div",{className:"calendar__number calendar__number--current"},"18"),l.a.createElement("div",{className:"calendar__number"},"19"),l.a.createElement("div",{className:"calendar__number"},"20"),l.a.createElement("div",{className:"calendar__number"},"21"),l.a.createElement("div",{className:"calendar__number"},"22"),l.a.createElement("div",{className:"calendar__number"},"23"),l.a.createElement("div",{className:"calendar__number"},"24"),l.a.createElement("div",{className:"calendar__number"},"25"),l.a.createElement("div",{className:"calendar__number"},"26"),l.a.createElement("div",{className:"calendar__number"},"27"),l.a.createElement("div",{className:"calendar__number"},"28"),l.a.createElement("div",{className:"calendar__number"},"29"),l.a.createElement("div",{className:"calendar__number"},"30"))))},w=window.location;E=w.host.includes(":")?w.host.substring(0,w.host.length-5):w.host;var N=w.protocol+"//"+E+":8181/",b=a(241);b.defaults.xsrfCookieName="csrftoken",b.defaults.xsrfHeaderName="X-CSRFToken",b.defaults.withCredentials=!1;var k=a(593);function x(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var y,_,S=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.password),l.a.createElement("td",null,l.a.createElement("a",{onClick:e.userPack.methods.deleteUser,href:"/",style:{position:"relative",bottom:"28px"}},l.a.createElement("img",{style:{width:"30px",height:"30px"},src:"svg/delete.svg",alt:"Kiwi standing on oval",className:"deleteIcon"})),"-")))},C=function(e){var t=!1;return e.selectedUsers.forEach((function(a){a===e.username&&(t=!0)})),l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:"#",style:{backgroundColor:t?"rgb(0, 112, 186)":"",color:t?"white":""},onClick:function(t){t.preventDefault(),e.handleSelect(e.username)}},e.username),l.a.createElement("hr",{className:"solid"}))},P=function(e){var t=k(new Date(e.line.startTime),"dd/mm/yy @ hh:mm tt");return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,e.line.src_user),l.a.createElement("td",null,e.line.dst_user),l.a.createElement("td",null,t),l.a.createElement("td",null,e.line.duration),l.a.createElement("td",null,parseFloat(.01*e.line.duration/60).toFixed(7))))},U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={customer:!1},y=e.userId,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(e){var t=this;console.log(e),y&&b.post(N+"getSubscriberAdmin/",{userId:y}).then((function(e){e.data.id&&(console.log("success set",e.data.id),t.props.userPack.virtualUpdate(e.data))})).catch((function(e){console.log("error nuevo",e)}))}},{key:"render",value:function(){var e,t,a,n=this,s=this.props.userPack.dimensions.width<768,r=this.props.userPack.dimensions.isMobile?"15px":"50px";return this.props.userPack.filterNumber&&(this.props.userPack.filterNumber.length>0||this.props.userPack.selectedUsers.length>0)?(t=this.props.userPack.filteredResults,e=this.props.userPack.filteredResults.length):(t=this.props.userPack.history,e=this.props.userPack.amountCalls),a=this.state&&this.state.customer?this.state.customer:this.props.userPack.customer,console.log("rendered",a.id),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"mainBody",style:{marginLeft:r,marginRight:r,marginTop:"18px",marginBottom:"200px"}},l.a.createElement("div",{className:"row"},l.a.createElement("h1",{className:"mainTitle",style:{marginLeft:"10px",fontSize:"40px"}},"Welcome ",a.name)),l.a.createElement("div",{className:"row",style:{paddingTop:"10px",marginLeft:s?"0.3rem":"0px",marginRight:s?"0.3rem":"0px"}},l.a.createElement("div",{className:"col-xs-12 col-sm-4 caja",style:{maxHeight:"140px",paddingTop:"10px"}},l.a.createElement("div",{className:"row center"},l.a.createElement("h1",{className:"balance"},"US$",a.balance)),l.a.createElement("div",{className:"row center",style:{marginTop:"5px"}},l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("button",{onClick:this.props.userPack.methods.recargar,style:{marginTop:"8px",width:"150px",position:"relative",bottom:"6px"},className:"pure-material-button-contained green"},"Recargar"))),l.a.createElement("div",{className:"row center",style:{marginTop:"5px"}},l.a.createElement("p",null," (ICQ 742481225)"))),l.a.createElement("div",{className:"col-xs-12 col-sm-7 caja",style:{marginRight:"0px",marginLeft:s?"0.0px":.065*this.props.userPack.dimensions.width+"px",marginTop:s?"25px":"0px",paddingTop:"10px",paddingBottom:"10px"}},l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("h1",{className:"secondTitle",style:{marginBottom:"5px",fontSize:s?"28px":"30px"}},"Mis dispositivos"),l.a.createElement("button",{onClick:this.props.userPack.methods.addDevice,style:{marginLeft:"35px",width:"100px",position:"relative",bottom:"6px"},className:"pure-material-button-contained"},"Agregar"))),l.a.createElement("div",{className:"row center"},l.a.createElement("table",{id:"customers"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"USUARIO"),l.a.createElement("th",null,"CONTRASE\xd1A"),l.a.createElement("th",null,"IP"))),l.a.createElement("tbody",null,this.props.userPack.loadingComponent?null:l.a.createElement(l.a.Fragment,null,a.subscribers.map((function(e,t){return l.a.createElement(S,{userPack:n.props.userPack,deleteUser:n.deleteUser,key:e.id,username:e.username,password:e.password})}))))),this.props.userPack.loadingComponent?l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("div",{className:"lds-hourglass"}))):null))),l.a.createElement("div",{className:"row",style:{marginTop:"30px"}},l.a.createElement("div",{className:"col-xs-auto",style:{marginLeft:"10px"}},l.a.createElement("div",{className:"dropdown"},l.a.createElement("button",{className:"dropbtn"},"Usuarios"),l.a.createElement("div",{className:"dropdown-content"},a.subscribers.map((function(e,t){return l.a.createElement(C,{userPack:n.props.userPack,selectedUsers:n.props.userPack.selectedUsers,handleSelect:n.props.userPack.methods.handleSelect,key:e.id,username:e.username,password:e.password})}))))),l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("div",{className:"dropdown",style:{marginLeft:"15px"}},l.a.createElement("button",{className:"dropbtn"},"Inicio"),l.a.createElement("div",{className:"dropdown-content left"},l.a.createElement(f,null)))),l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("div",{className:"dropdown",style:{marginLeft:"15px"}},l.a.createElement("button",{className:"dropbtn"},"Final"),l.a.createElement("div",{className:"dropdown-content right"},l.a.createElement(f,null))))),l.a.createElement("div",{className:"row",style:{marginLeft:"8px",marginTop:"16px"}},l.a.createElement("input",{type:"search",value:this.props.userPack.filterNumber,placeholder:"Buscar por n\xfamero",onChange:this.props.userPack.methods.filterNumber})),l.a.createElement("div",{className:"col-xs-12 caja",style:{marginTop:"25px",marginBottom:"80px",overflowX:"visible"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xs-12 col-md-6"},l.a.createElement("h1",{className:"secondTitle",style:{marginTop:"10px",padding:"8px",fontSize:s?"24px":"34px"}},"Historial de llamadas               ")),l.a.createElement("div",{className:"col-xs-12 col-md-6"},this.props.userPack.dimensions.width<1024?l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("p",{style:{paddingTop:"8px",paddingBottom:"8px"}},"Mostrando ",x(e)," de ",x(this.props.userPack.totalCalls)," llamadas ",l.a.createElement("a",{href:"#",onClick:this.props.userPack.methods.fetchMore},"ver m\xe1s "))):l.a.createElement("div",{className:"col-xs-auto",style:{position:"absolute",right:"70px"}},l.a.createElement("p",{style:{paddingTop:"5px"}},"Mostrando ",x(e)," de ",x(this.props.userPack.totalCalls)," llamadas ",l.a.createElement("a",{href:"#",onClick:this.props.userPack.methods.fetchMore},"ver m\xe1s "))))),l.a.createElement("div",{className:"row center"},l.a.createElement("table",{id:"customers",style:{overflowX:"scroll !important"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Desde"),l.a.createElement("th",null,"Hacia"),l.a.createElement("th",null,"Fecha"),l.a.createElement("th",null,"Duraci\xf3n (segundos)"),l.a.createElement("th",null,"Costo (US$)"))),l.a.createElement("tbody",null,this.props.userPack.loadingHistorial?null:t.map((function(e,t){return l.a.createElement(P,{line:e,key:t})})))),this.props.userPack.loadingHistorial?l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto"},l.a.createElement("div",{className:"lds-hourglass"}))):null))))}}]),t}(n.Component),I=a(253),T=(a(2),window.location);_=T.host.includes(":")?T.host.substring(0,T.host.length-5):T.host;var j=T.protocol+"//"+_+":8181/",F=a(241);F.defaults.xsrfCookieName="csrftoken",F.defaults.xsrfHeaderName="X-CSRFToken",F.defaults.withCredentials=!1;Array(2),Array(0);var H=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement("a",{className:"navTitle",onClick:function(){e.userPack.handleLogout()},href:"#"},"Logout")))},D=function(e){var t=e.userPack.dimensions.width<800?"26px":"50px",a=e.userPack.dimensions.width<800?"60px":"130px",n=e.userPack.dimensions.width<800?"60px":"130px",s=e.userPack.dimensions.width<800?"18px":"30px",r=e.userPack.dimensions.width<800?"310px":"600px";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"overlay",onClick:function(e){document.getElementById("overlay").style.display="none"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{id:"text"},l.a.createElement("h1",{style:{minWidth:r,marginBottom:"8px",fontSize:t}},"Elija su m\xe9todo de pago:"),l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto glowingTarjeta",style:{width:a,height:n,marginRight:"40px"}},l.a.createElement("div",{className:"row center",style:{zIndex:"15",borderWidth:"10px !important",borderColor:"black !important"}},l.a.createElement("img",{src:"https://cdn3.iconfinder.com/data/icons/finance-223/64/x-03-512.png",style:{width:a,height:n}}),l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}},l.a.createElement("div",{id:"text",style:{position:"relative",top:"30px",fontSize:s}},"Dep\xf3sito"))),l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}}))),l.a.createElement("div",{className:"col-xs-auto glowingTarjeta",style:{width:a,height:n,marginRight:"40px"}},l.a.createElement("div",{className:"row center",style:{borderWidth:"10px !important",borderColor:"black !important"}},l.a.createElement("img",{src:"https://r5y5g3p7.rocketcdn.me/wp-content/uploads/2019/07/Bitcoin-dark-web-drug-dealer-caught.jpg",style:{width:a,height:n}}),l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}},l.a.createElement("div",{id:"text",style:{position:"relative",top:"30px",right:"15px",fontSize:s}},"Bitcoin"))),l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}}))),l.a.createElement("div",{className:"col-xs-auto glowingTarjeta",style:{width:a,height:n,marginRight:"20px"}},l.a.createElement("div",{className:"row center",style:{borderWidth:"10px !important",borderColor:"black !important"}},l.a.createElement("img",{src:"/svg/credit-card.svg",style:{width:a,height:n}}),l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}},l.a.createElement("div",{id:"text",style:{position:"relative",top:"30px",fontSize:s}},"Tarjeta"))),l.a.createElement("div",{className:"row center"},l.a.createElement("div",{className:"col-xs-auto",style:{width:a,height:n}}))),l.a.createElement("div",{className:"row center",style:{position:"relative",top:"60px"}},l.a.createElement("h1",{style:{minWidth:r,marginBottom:"8px",fontSize:t}},"Soporte ICQ: 742481225")))))))},O=function(e){var t=l.a.useState(!1),a=Object(g.a)(t,2),n=a[0],s=a[1],r=e.dimensions.width<768;return l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{userPack:e.userPack}),l.a.createElement("header",{className:"header"},r?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:n?"burguer change":"burguer",style:{position:"relative",left:"10px"},onClick:function(e){s((function(e){return!e}))}},l.a.createElement("div",{className:"bar1"}),l.a.createElement("div",{className:"bar2"}),l.a.createElement("div",{className:"bar3"})),l.a.createElement("ul",{className:n?"main-nav":"main-nav closed",id:"navContent"},l.a.createElement(H,{userPack:e.userPack}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"logo"},l.a.createElement("a",{className:"navTitle",href:"#"},"XVOICE")),l.a.createElement("ul",{className:"main-nav",id:"navContent"},l.a.createElement(H,{userPack:e.userPack})))))},L=function(e){var t=l.a.useState(!1),a=Object(g.a)(t,2),n=a[0],s=a[1],r=window.localStorage.getItem("username"),o=window.localStorage.getItem("password");r||(r=e.userPack.email,o=e.userPack.password);var i=l.a.useState(!0),c=Object(g.a)(i,2),m=c[0],d=c[1],u=l.a.useState(!1),h=Object(g.a)(u,2),p=h[0],v=h[1],E=l.a.useState(""),f=Object(g.a)(E,2),w=f[0],N=f[1],b=l.a.useState(""),k=Object(g.a)(b,2),x=k[0],y=k[1],_=l.a.useState(null),S=Object(g.a)(_,2),C=(S[0],S[1],n?"active":""),P=n?"":"active",U=e.userPack.dimensions.width<522;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"login-container",style:{minHeight:U?e.userPack.dimensions.height+"px":e.userPack.dimensions.height-60+"px",marginTop:U?"0px":"62px",padding:"4rem 4rem 0 4rem",margin:U?"":"30px auto 30px"}},l.a.createElement("div",{className:"form-login"},l.a.createElement("ul",{className:"login-nav"},l.a.createElement("li",{className:"login-nav__item "+P},l.a.createElement("a",{onClick:function(){s(!1)}},"Sign In")),l.a.createElement("li",{className:"login-nav__item "+C},l.a.createElement("a",{onClick:function(){s(!0)}},"Sign Up"))),l.a.createElement("label",{htmlFor:"login-input-user",className:"login__label"},"Email, Username or Phonenumber"),l.a.createElement("input",{id:"login-input-user",value:r,onChange:function(t){e.userPack.handleUpdate("email",t.target.value)},className:"login__input",type:"text"}),l.a.createElement("label",{htmlFor:"login-input-password",className:"login__label"},"Password"),l.a.createElement("input",{id:"login-input-password",value:o,onKeyPress:function(t){"Enter"===t.key&&e.userPack.handleLogin("","",m)},onChange:function(t){e.userPack.handleUpdate("password",t.target.value)},className:"login__input",type:"password"}),n?l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"login-input-user",className:"login__label"},"Nombre"),l.a.createElement("input",{id:"login-input-user",value:w,onChange:function(e){N(e.target.value)},className:"login__input",type:"text"}),l.a.createElement("label",{htmlFor:"login-input-user",className:"login__label"},"Celular"),l.a.createElement("input",{id:"login-input-user",value:x,onChange:function(e){var t=e.target.value;""===t&&y(t);try{var a=parseInt(t);if(isNaN(a))return}catch(n){return void console.log("error",n)}y(t.replace(/[^\d]+/g,""))},className:"login__input",type:"text"}),l.a.createElement("label",{htmlFor:"login-sign-up",className:"login__label--checkbox"},l.a.createElement("input",{id:"login-sign-up",type:"checkbox",checked:p,onChange:function(){v((function(e){return!e}))},className:"login__input--checkbox"}),"Estoy de acuerdo con las condiciones"),l.a.createElement("button",{className:"login__submit",onClick:function(){e.userPack.handleRegister(r,o,w,x)}},"Registrarme")):l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"login-sign-up",className:"login__label--checkbox"},l.a.createElement("input",{id:"login-sign-up",type:"checkbox",checked:m,onChange:function(){d((function(e){return!e}))},className:"login__input--checkbox"}),"Mantenme logueado"),l.a.createElement("button",{className:"login__submit",onClick:function(){e.userPack.handleLogin(r,o,m)}},"Entrar"))),l.a.createElement("a",{href:"#",className:"login__forgot"},"Forgot Password?")))},W=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).toggleRegistration=function(e){e.target.classList.toggle("change"),document.querySelector("#navContent").classList.toggle("closed")},a.recargar=function(){document.getElementById("overlay").style.display="block",console.log("working")},a.updateDimensions=function(){var e=window,t=document,n=t.documentElement,l=t.getElementsByTagName("body")[0],s=e.innerWidth||n.clientWidth||l.clientWidth,r=e.innerHeight||n.clientHeight||l.clientHeight;if(!(r-a.state.dimensions.height<60&&r-a.state.dimensions.height>0||s-a.state.dimensions.width===0))if(s<763){var o={width:s,height:r,isMobile:!0};a.setState({dimensions:o})}else{var i={width:s,height:r,isMobile:!1};a.setState({dimensions:i})}},a.filterNumber=function(e){var t,n;if(e.target?(t=e.target.value.replace(/\D/g,""),a.setState({filterNumber:t}),n=Object(o.a)(a.state.selectedUsers)):(t=a.state.filterNumber,n=Object(o.a)(e)),t.length>0&&n.push(t),n.length>0){var l=window.localStorage.getItem("token");F.defaults.headers.post.Authorization="JWT "+l,a.setState({loadingHistorial:!0}),console.log("sending",n),F.post(j+"filterNumber/",{numbers:n,id:a.state.customer.id}).then((function(e){var t=e.data;a.setState({filteredResults:t}),a.setState({loadingHistorial:!1})})).catch((function(e){console.log("error",e),a.setState({loadingHistorial:!1})}))}},a.virtualUpdate=function(e){a.setState({customer:e}),a.fetchHistory(50,{id:e.id},!0),console.log("feched for",{id:e.id},!0)},a.fetchHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:null},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=window.localStorage.getItem("token");F.defaults.headers.post.Authorization="JWT "+l,a.setState({loadingHistorial:!0}),console.log("changed?",n),F.post(n?j+"getHistoryAdmin/":j+"getHistory/",{amount:e,userId:t.id}).then((function(t){console.log("results",t.data.totalCalls);var n,l=t.data.history;n="all"===e?l.length:e;var s=t.data.totalCalls;n>s&&(n=s),a.setState({history:l,totalCalls:s,amountCalls:n,loading:!1}),a.setState({loadingHistorial:!1})})).catch((function(e){console.log("error",e),a.setState({loading:!1,loadingHistorial:!1})}))},a.getUser=function(){var e=window.localStorage.getItem("token");F.defaults.headers.get.Authorization="JWT "+e,a.setState({loading:!0}),F.get(j+"getSub/").then((function(e){a.setState({customer:e.data},(function(){a.setState({loading:!1,logged:!0})}))})).catch((function(e){console.log("error",e),a.setState({loading:!1})})),a.fetchHistory(15)},a.handleSelect=function(e){var t=!1,n=Object(o.a)(a.state.selectedUsers);n.forEach((function(l){if(l===e)return n=n.filter((function(t){return t!=e})),a.setState({selectedUsers:n}),a.filterNumber(n),void(t=!0)})),t||(n.push(e),a.setState({selectedUsers:n}),a.filterNumber(n))},a.deleteUser=function(e){var t=window.localStorage.getItem("token");F.defaults.headers.post.Authorization="JWT "+t,a.setState({loadingComponent:!0}),F.post(j+"deleteSubscriber/",{subscriber:e}).then((function(e){a.setState({customer:e.data}),a.setState({loadingComponent:!1})})).catch((function(e){console.log("error",e),a.setState({loadingComponent:!1})}))},a.filterUser=function(e){var t=Object(o.a)(a.state.selectedUsers);return t.filter((function(t){return t!=e})),t},a.switchLoadingComponent=function(){var e=!a.state.loadingComponent;a.setState({loadingComponent:e})},a.handleUpdate=function(e,t){switch(window.localStorage.removeItem("username"),window.localStorage.removeItem("password"),e){case"email":a.setState({email:t});break;case"password":a.setState({password:t})}},a.handleLogin=function(e,t,n){var l=window.localStorage.getItem("token");F.defaults.headers.get.Authorization="JWT "+l,a.setState({loading:!0});var s=a.state.email,r=a.state.password;n&&(window.localStorage.setItem("username",s),window.localStorage.setItem("password",r)),F.post(j+"token-auth/",{username:s,password:r}).then((function(e){window.localStorage.setItem("token",e.data.token),a.setState({customer:e.data.user}),console.log("resultado",e.data.user);a.state.logged;a.fetchHistory(15),a.setState({logged:!0}),a.setState({loading:!1})})).catch((function(e){console.log("error",e),a.setState({loading:!1})}))},a.addDevice=function(){if(!(a.state.customer.subscribers.length>4)){var e=window.localStorage.getItem("token");F.defaults.headers.get.Authorization="JWT "+e,a.setState({loadingComponent:!0}),F.get(j+"addDevice/").then((function(e){a.setState({customer:e.data}),a.setState({loadingComponent:!1})}))}},a.deleteDevice=function(e){var t=window.localStorage.getItem("token");F.defaults.headers.get.Authorization="JWT "+t,a.setState({loadingComponent:!0}),F.post(j+"addDevice",{id:e}).then((function(e){a.setState({customer:e.data}),a.setState({loadingComponent:!1})}))},a.fetchMore=function(e){e.preventDefault(),a.fetchHistory(3*a.state.amountCalls)},a.fetchAll=function(e){e.preventDefault(),a.fetchHistory("all")},a.handleRegister=function(e,t,n,l){var s=window.localStorage.getItem("token");F.defaults.headers.get.Authorization="JWT "+s,a.setState({loading:!0});var r=a.state.email,o=a.state.password;F.post(j+"newCustomer/",{email:r,password:o,name:n,phoneNumber:l}).then((function(e){e.data.id&&a.setState({customer:e.data});var t=!a.state.logged;a.setState({logged:t}),a.setState({loading:!1}),F.post(j+"token-auth/",{username:r,password:o}).then((function(e){window.localStorage.setItem("token",e.data.token)})).catch((function(e){console.log("error",e),a.setState({loading:!1})}))})).catch((function(e){console.log("error",e),a.setState({loading:!1})}))},a.handleLogout=function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("username"),window.localStorage.removeItem("password"),a.setState({logged:!1})},window.addEventListener("resize",a.updateDimensions);var n,l,s,r=window,c=document,u=c.documentElement,g=c.getElementsByTagName("body")[0],h=r.innerWidth||u.clientWidth||g.clientWidth,p=r.innerHeight||u.clientHeight||g.clientHeight,v=sessionStorage.getItem("superToken");console.log("producto superToken",v),n=h<763,window.localStorage.getItem("token")?(l=!1,s=!0,console.log("true")):(l=!1,s=!1,console.log("false"));var E=window.localStorage.getItem("username"),f=window.localStorage.getItem("password");return E||(E="",f=""),a.state={selectedUsers:[],filteredResults:[],loadingFiltered:!1,filterNumber:"",history:[],totalCalls:0,amountCalls:0,logged:l,dimensions:{width:h,height:p,isMobile:n},loading:s,loadingHistorial:!1,email:E,password:f,customer:null,loadingComponent:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.updateDimensions()}},{key:"componentDidMount",value:function(){window.localStorage.getItem("token")&&this.getUser()}},{key:"componentWillMount",value:function(){window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e={virtualUpdate:this.virtualUpdate,dimensions:this.state.dimensions,customer:this.state.customer,email:this.email,password:this.password,history:this.state.history,totalCalls:this.state.totalCalls,amountCalls:this.state.amountCalls,filteredResults:this.state.filteredResults,loadingFiltered:this.state.loadingFiltered,selectedUsers:this.state.selectedUsers,filterNumber:this.state.filterNumber,loadingHistorial:this.state.loadingHistorial,logged:this.state.logged,handleLogin:this.handleLogin,handleRegister:this.handleRegister,handleUpdate:this.handleUpdate,handleLogout:this.handleLogout,addDevice:this.addDevice,deleteDevice:this.deleteDevice,loadingComponent:this.state.loadingComponent,methods:{handleLogout:this.handleLogout,handleRegister:this.handleRegister,addDevice:this.addDevice,deleteDevice:this.deleteDevice,filterNumber:this.filterNumber,filterUser:this.filterUser,deleteUser:this.deleteUser,fetchHistory:this.fetchHistory,fetchMore:this.fetchMore,fetchAll:this.fetchAll,handleUpdate:this.handleUpdate,recargar:this.recargar,handleSelect:this.handleSelect}};return l.a.createElement(l.a.Fragment,null,this.state.loading?l.a.createElement("div",{className:"row",style:{justifyContent:"center"}},l.a.createElement("div",{className:"lds-hourglass",style:{marginTop:"220px"}})):l.a.createElement(l.a.Fragment,null,this.state.logged?l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{dimensions:this.state.dimensions,userPack:e}),l.a.createElement(I.a,null,l.a.createElement(U,{path:"/",userPack:e}),l.a.createElement(U,{path:"user/:userId",userPack:e}),l.a.createElement(v,{path:"/dialer",userPack:e}))):l.a.createElement(L,{userPack:e})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[254,1,2]]]);
//# sourceMappingURL=main.5360072.chunk.js.map